Надо сделать приложение, которое способно работать с fog-файлами. Некоторую основу я уже сделал. Берется fog-файл и 
переводится в корректную форму. Пока это касается только раскрытия iisstore, но можно (и нужно) расширить трансформации.
Итоговый XElement может сохраняться в виде файла. 

Для чего такие преобразования нужны? Во-первых, для более "аккуратного" представления fog-файлов, сказывающееся на 
скорости загрузки и использовании оперативной памяти. Во-вторых, для коррекции документов. Фактически, для перевычисления 
специальных (small, medium, normal) представлений мультимедиа.

Документы находятся через анализ fog-файлов. Вопрос в том, что запись документа может иметь uri вне данной кассеты. 
В принципе, можно работать с базой данных через API FactographData, но это будет уже другая история. 

### 20240510 10:12
Два или три дня я думал над выявленной ситуацией. Действительно, базироваться в переделках документа на первом описании,
опасно потому что потом это описание может перекочевать в другой fog-файл. В то же время, я не могу использовать всю базу
данных, по крайней мере, это затруднительно. Сейчас я склоняюсь к "ненадежному" решению, когда анализ и коррекция ведется 
первого описания документа. Дело в том, что атрибуты uri и docmetainfo не должны меняться со временем и при редактировании 
записи документа. В таком случае, старые значения этих атрибутов сохраняться в отредактированных копиях. Для uri - это 
очевидно, для docmetainfo - это не так, поскольку мы хотим менять метаинформационные поля, напр. ширину и высоту. Однако, 
я пока эти поля не использую, они нужны при создании превьюшек. Более того, от этих атрибутов и в последнем случае можно 
отказаться. Напр. уменьшая образ в 2 и в 4 раза. 

Попробую сделать как задумал. Для этого надо fog-документ перевести к каноническую форму. Если там выявляются ММ-документы,
то, в некоторых случаях, надо корректировать ширину и высоту, а если есть возможность - то и время съемки. При такой 
трансформации будет накапливаться командный файл для исполнения после фиксации нового варианта fog-документа. 

Действие 1. Создать кассету, с которой будут проводиться эксперименты. В кассете должны быть фотки, видео, аудио, PDF.

Сделал. Но далее был обед с Натальей Павловой, потом прогула по городку, теперь сел продолжить. Кассета t1 есть и содержит 
нужный контент. Теперь надо попробовать сделать программу нормализации фога. Работаю с метаинформацией.

### 20240511 07:41
Вчера сделал нужное преобразование для постого случая с получением канонической формы. Теперь надо бы добавить отметку 
времени, операторы уничтожения и подстановки. Это будет полный случай. Кстати, простой случай уже продемонстрировал 
работоспособность в использовании SypBlazor.

Есть еще одна недоделка в предыдущих разработках. Это формат вставления fog-документа. Там нет определения пустого 
пространства имен. Это легко исправить. Может быть, легко...

Оказалось, что не легко. Пришлось корректировать CManager, а он у меня очень старой версии. Тем не менее, домашний компьютер
сработал с этим кодом нормально. Осталось исправить загрузку аудио. 

Загрузку аудио исправить не удалось. Придется делать какое-то другое решение. Теперь я умею превращать метаинформацию в 
каноническую форму, при добавлении пользовательского RDF, файл, хоть и с пустым содержимым, сделан каноническим и если его 
изменения будут корректными, то все будет нормально. Теперь подхожу к коррекции метаинформации о документах. 
С метаинформацией по имиджам - считаю все нормально. Нужно взять метаинформацию по видео файлам и поместить в
docmetainfo.

Теперь "подкрадываюсь" к главному преобразованию. Идея заключается в том, чтобы обработать одну кассету. 
То есть, беру фог из метаинформации, преобразую его в каноническую форму, потом делаю подмену на 
вычисленное значение. При преобразовании, нахожу multimedia документы и пытаюсь что-то доделать. Для видео
с помощью MediaInfo определяю ширину и высоту кадра. Эти параметры вставляются в docmetainfo. Далее, 
обращаем внимание на дефолтные значения по преобразованиям. Сбрасываем преобразования в командный файл. 
Потом исполняем этот командный файл. Хорошо бы отслеживать  уже сделанные преобразования, но где это 
фиксировать, я не знаю. Поэтому буду формировать полный командный файл. 

### 202405 08:06
День Пионерской организации! Как давно это было...

Вчера нашел неточность в программе преобразования кассет, в части вычисления превьюшек. Это из-за MIME-тонкостей,
напр. расширения jpeg и jpg означают одно и то же, но надо это учесть. Пока оставлю эту тему, попробую доделать 
программу до работающего варианта. Для этого, как минимум, надо добавить определение метаинформации для видео и
перевычисление превьюшек. Попробую.

Делание превьюшек я "добил" (разве что аудио под вопросом), теперь надо для видео корректировать ширину и высоту кадра. 
Пока кадр получается со стандартными размерами, в итоге получается пустое место в кадре, особенно для вертикальных кадров. 

Пора заняться получением метаинформации через MediaInfo. 

### 20240520 09:45
Наконец, собранная конструкция заработала. Новая метаинформация не фиксируется в базе данных, но используется для вычисления
превьюшек. Надо маленько доделать и провести эксперимент напр. с семейным архивом. Доделать - это изменить место расположения
рабочих файлов и как-то организовать массовое перевычисление превьюшек. 

### 20240521 11:26
Я экспериментировал с Syp-массивом кассет. Выяснилось, что "главная" кассета SypCassete попрождает дефектные изображения
малениких фоток, пришлось разбираться. Разобрался, нашел подходящий старый вариант и потратил пару часов на то, чтобы маленькие 
оригиналы вручную заместить большими или средними. Справился, проверил. Теперь надо проверить работу конвертированных видео.

Проверил, работает. Улучшил визуализацию тем, что не фиксирую размер кадра, визуализируется в естественных размерах. 

Что теперь? Надо бы трансформировать кассеты семейного архива. 